#!/bin/bash -e
curl -vX POST -H "Content-Type: application/vnd.kafka.avro.v2+json" \
    -H "Accept: application/vnd.kafka.v2+json" \
    --url "http://localhost:8082/topics/health-metrics" \
    --data '{"value_schema":"{\"type\":\"record\",\"name\":\"HealthMetric\", \"namespace\": \"com.sts\", \"fields\":[{\"name\":\"product_id\",\"type\":\"string\"},{\"name\":\"product_instance_id\",\"type\":\"string\"},{\"name\":\"user_id\",\"type\":\"string\"},{\"name\":\"sfdc_account_id\",\"type\":\"string\"},{\"name\":\"description\",\"type\":\"string\"},{\"name\":\"metric_date\",\"type\":\"string\"},{\"name\":\"health\",\"type\":\"double\"},{\"name\":\"metrics\",\"type\":{\"type\":\"map\",\"values\":[\"string\",{\"type\":\"map\",\"values\":\"string\"}]}}]}","records":[{"value":{"product_id":"alm","product_instance_id":"55492","sfdc_account_id":"0013000000HQXnSAAX","description":"ALM Health Metrics - Unit Test","metric_date":"2018-03-08T18:30:46.412+00:00","health":1.5,"user_id":"receu01","metrics":{"daily_users":{"string":"400"},"weekly_users":{"string":"560"}}}}]}'
